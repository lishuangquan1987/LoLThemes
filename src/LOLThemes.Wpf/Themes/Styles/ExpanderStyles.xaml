<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!--
        ===================================================================
        ExpanderStyles.xaml - Expander 控件样式定义
        ===================================================================
        
        文件说明：
        - 定义 Expander 控件的视觉样式
        - 根据 101.qq.com 网站配色重新设计
        - 使用现代化的线条箭头（>）替代实心三角形
        
        包含的样式：
        - ExpanderToggleButtonStyle: 展开/折叠切换按钮样式
        - LOLExpanderStyle: Expander 容器样式
        - 默认样式: 自动应用到所有 Expander 控件
        
        设计特点：
        - 展开/折叠箭头使用线条样式（>），非实心三角形
        - 箭头旋转动画（0-90度），不影响字体清晰度
        - 展开时箭头旋转 90 度（不是 180 度）
        - 移除所有阴影效果
        
        动画说明：
        - 箭头旋转动画：展开时从 0 度旋转到 90 度
        - 动画不影响字体清晰度，仅影响箭头方向
        
        使用方式：
        - 默认样式会自动应用到所有 Expander 控件
    -->

    <!--  合并基础资源，确保可以访问 Fonts  -->
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="pack://application:,,,/LOLThemes.Wpf;component/Themes/Fonts.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <!--  Expander ToggleButton 样式  -->
    <Style x:Key="ExpanderToggleButtonStyle" TargetType="ToggleButton">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Foreground" Value="{DynamicResource TextPrimaryBrush}" />
        <Setter Property="BorderBrush" Value="{DynamicResource BorderDefaultBrush}" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Padding" Value="8,6" />
        <Setter Property="TextOptions.TextFormattingMode" Value="Display" />
        <Setter Property="TextOptions.TextRenderingMode" Value="ClearType" />
        <Setter Property="SnapsToDevicePixels" Value="True" />
        <Setter Property="HorizontalContentAlignment" Value="Left" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ToggleButton">
                    <Border
                        x:Name="Border"
                        Padding="{TemplateBinding Padding}"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <!--  展开/折叠图标 - 现代化线条箭头  -->
                            <Path
                                x:Name="Arrow"
                                Grid.Column="0"
                                Margin="0,0,8,0"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Data="M 0,0 L 5,5 L 0,10"
                                RenderTransformOrigin="0.5,0.5"
                                Stroke="{DynamicResource BorderGoldBrush}"
                                StrokeEndLineCap="Round"
                                StrokeLineJoin="Round"
                                StrokeStartLineCap="Round"
                                StrokeThickness="2">
                                <Path.RenderTransform>
                                    <RotateTransform x:Name="ArrowRotate" Angle="0" />
                                </Path.RenderTransform>
                            </Path>

                            <!--  标题内容  -->
                            <ContentPresenter
                                Grid.Column="1"
                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                VerticalAlignment="Center"
                                RecognizesAccessKey="True" />
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <!--  鼠标悬停  -->
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Border" Property="Background" Value="{DynamicResource BackgroundHoverBrush}" />
                        </Trigger>

                        <!--  展开状态 - 旋转90度  -->
                        <Trigger Property="IsChecked" Value="True">
                            <Trigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation
                                            Storyboard.TargetName="ArrowRotate"
                                            Storyboard.TargetProperty="Angle"
                                            To="90"
                                            Duration="0:0:0.2">
                                            <DoubleAnimation.EasingFunction>
                                                <CubicEase EasingMode="EaseOut" />
                                            </DoubleAnimation.EasingFunction>
                                        </DoubleAnimation>
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.EnterActions>
                            <Trigger.ExitActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation
                                            Storyboard.TargetName="ArrowRotate"
                                            Storyboard.TargetProperty="Angle"
                                            To="0"
                                            Duration="0:0:0.2">
                                            <DoubleAnimation.EasingFunction>
                                                <CubicEase EasingMode="EaseIn" />
                                            </DoubleAnimation.EasingFunction>
                                        </DoubleAnimation>
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.ExitActions>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!--  LOL Expander 样式  -->
    <Style x:Key="LOLExpanderStyle" TargetType="Expander">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Foreground" Value="{DynamicResource TextPrimaryBrush}" />
        <Setter Property="BorderBrush" Value="{DynamicResource BorderDefaultBrush}" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="FontFamily" Value="{DynamicResource PrimaryFont}" />
        <Setter Property="FontSize" Value="{DynamicResource FontSizeNormal}" />
        <Setter Property="Margin" Value="0,0,0,8" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Expander">
                    <Border
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        SnapsToDevicePixels="True"
                        UseLayoutRounding="True">
                        <DockPanel>
                            <!--  标题按钮  -->
                            <ToggleButton
                                x:Name="HeaderSite"
                                Content="{TemplateBinding Header}"
                                DockPanel.Dock="Top"
                                FontFamily="{TemplateBinding FontFamily}"
                                FontSize="{TemplateBinding FontSize}"
                                FontWeight="{TemplateBinding FontWeight}"
                                Foreground="{TemplateBinding Foreground}"
                                IsChecked="{Binding IsExpanded, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                Style="{StaticResource ExpanderToggleButtonStyle}" />

                            <!--  内容区域  -->
                            <Border
                                x:Name="ContentSite"
                                Padding="8,6"
                                Background="{TemplateBinding Background}"
                                DockPanel.Dock="Top"
                                Visibility="Collapsed">
                                <ContentPresenter Margin="0" />
                            </Border>
                        </DockPanel>
                    </Border>
                    <ControlTemplate.Triggers>
                        <!--  展开状态  -->
                        <Trigger Property="IsExpanded" Value="True">
                            <Setter TargetName="ContentSite" Property="Visibility" Value="Visible" />
                        </Trigger>

                        <!--  方向：向上展开  -->
                        <Trigger Property="ExpandDirection" Value="Up">
                            <Setter TargetName="HeaderSite" Property="DockPanel.Dock" Value="Bottom" />
                            <Setter TargetName="ContentSite" Property="DockPanel.Dock" Value="Top" />
                        </Trigger>

                        <!--  方向：向左展开  -->
                        <Trigger Property="ExpandDirection" Value="Left">
                            <Setter TargetName="HeaderSite" Property="DockPanel.Dock" Value="Right" />
                            <Setter TargetName="ContentSite" Property="DockPanel.Dock" Value="Left" />
                        </Trigger>

                        <!--  方向：向右展开  -->
                        <Trigger Property="ExpandDirection" Value="Right">
                            <Setter TargetName="HeaderSite" Property="DockPanel.Dock" Value="Left" />
                            <Setter TargetName="ContentSite" Property="DockPanel.Dock" Value="Right" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!--  默认 Expander 样式  -->
    <Style BasedOn="{StaticResource LOLExpanderStyle}" TargetType="{x:Type Expander}" />

</ResourceDictionary>
