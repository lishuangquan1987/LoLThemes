<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="clr-namespace:LOLThemes.Wpf.Controls"
                    xmlns:converters="clr-namespace:LOLThemes.Wpf.Converters">
    
    <!-- 合并基础资源，确保可以访�和Colors �和Fonts -->
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/LOLThemes.Wpf;component/Themes/Colors.xaml"/>
        <ResourceDictionary Source="/LOLThemes.Wpf;component/Themes/Fonts.xaml"/>
    </ResourceDictionary.MergedDictionaries>

    <!-- StatBar 宽度转换�和-->
    <converters:StatBarWidthConverter x:Key="StatBarWidthConverter"/>

    <Style TargetType="{x:Type controls:StatBar}">
        <Setter Property="Height" Value="20"/>
        <Setter Property="BarColor" Value="{DynamicResource PrimaryGoldBrush}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:StatBar}">
                    <Grid>
                        <!-- 背景 -->
                        <Border Background="{DynamicResource BackgroundMediumBrush}"
                               BorderBrush="{DynamicResource BorderDarkBrush}"
                               BorderThickness="0.5"
                               CornerRadius="2"
                               SnapsToDevicePixels="True"/>
                        
                        <!-- 进度�和-->
                        <Border x:Name="progressBar"
                               HorizontalAlignment="Left"
                               CornerRadius="2"
                               Margin="1">
                                    <Border.Background>
                                        <DynamicResource ResourceKey="ProgressBarGradientBrush"/>
                                    </Border.Background>
                            <Border.Width>
                                <MultiBinding Converter="{StaticResource StatBarWidthConverter}">
                                    <Binding Path="Value" RelativeSource="{RelativeSource TemplatedParent}"/>
                                    <Binding Path="Maximum" RelativeSource="{RelativeSource TemplatedParent}"/>
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource TemplatedParent}"/>
                                </MultiBinding>
                            </Border.Width>
                        </Border>
                        
                        <!-- 数值文�和-->
                        <TextBlock x:Name="valueText"
                                  Foreground="{DynamicResource BackgroundDarkBrush}"
                                  FontFamily="{StaticResource PrimaryFont}"
                                  FontSize="{StaticResource FontSizeSmall}"
                                  FontWeight="{StaticResource FontWeightBold}"
                                  HorizontalAlignment="Center"
                                  VerticalAlignment="Center"
                                  Visibility="Collapsed">
                            <TextBlock.Text>
                                <MultiBinding StringFormat="{}{0:F0}/{1:F0}">
                                    <Binding Path="Value" RelativeSource="{RelativeSource TemplatedParent}"/>
                                    <Binding Path="Maximum" RelativeSource="{RelativeSource TemplatedParent}"/>
                                </MultiBinding>
                            </TextBlock.Text>
                        </TextBlock>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="ShowValue" Value="True">
                            <Setter TargetName="valueText" Property="Visibility" Value="Visible"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>

