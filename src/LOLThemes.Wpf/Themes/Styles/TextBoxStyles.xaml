<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:helpers="clr-namespace:LOLThemes.Wpf.Helpers;assembly=LOLThemes.Wpf">

    <!--
        ===================================================================
        TextBoxStyles.xaml - TextBox 控件样式定义
        ===================================================================
        
        文件说明：
        - 定义 TextBox 控件的视觉样式
        - 支持占位符文本、清除按钮、图标等附加功能
        - 根据 101.qq.com 网站配色重新设计
        
        包含的样式：
        - LOLTextBoxStyle: 基础文本框样式
        - 默认样式: 自动应用到所有 TextBox 控件
        
        设计特点：
        - 焦点状态使用金色边框（2px）突出显示
        - 悬停+焦点状态使用金色边框（2px）确保可见性
        - 移除所有动画效果和阴影
        - 支持占位符文本显示
        - 支持清除按钮（通过 TextBoxHelper.ShowClearButton 启用）
        - 支持图标显示（通过 TextBoxHelper.Icon 设置）
        
        附加属性支持：
        - TextBoxHelper.Placeholder: 占位符文本
        - TextBoxHelper.ShowClearButton: 是否显示清除按钮
        - TextBoxHelper.Icon: 图标图像源
        - TextBoxHelper.CornerRadius: 圆角值
        
        使用方式：
        - 默认样式会自动应用到所有 TextBox 控件
        - 使用附加属性启用额外功能
    -->

    <!--  合并基础资源，确保可以访问 Fonts  -->
    <!--  注意：Colors.xaml 和 Sizes.xaml 已通过 Generic.xaml 加载，无需直接引用  -->
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="pack://application:,,,/LOLThemes.Wpf;component/Themes/Fonts.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <!--  LOL TextBox 样式  -->
    <Style x:Key="LOLTextBoxStyle" TargetType="TextBox">
        <Setter Property="Background" Value="{DynamicResource BackgroundInputBrush}" />
        <Setter Property="Foreground" Value="{DynamicResource TextPrimaryBrush}" />
        <Setter Property="BorderBrush" Value="{DynamicResource BorderDefaultBrush}" />
        <Setter Property="BorderThickness" Value="{DynamicResource TextBoxBorderThickness}" />
        <Setter Property="Padding" Value="{DynamicResource TextBoxPadding}" />
        <Setter Property="FontFamily" Value="{StaticResource PrimaryFont}" />
        <Setter Property="FontSize" Value="{DynamicResource FontSizeNormal}" />
        <Setter Property="CaretBrush" Value="{DynamicResource BorderGoldBrush}" />
        <Setter Property="SelectionBrush" Value="{DynamicResource BorderGoldBrush}" />
        <Setter Property="SelectionOpacity" Value="0.4" />
        <Setter Property="HorizontalContentAlignment" Value="Left" />
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="TextOptions.TextFormattingMode" Value="Display" />
        <Setter Property="TextOptions.TextRenderingMode" Value="ClearType" />
        <Setter Property="SnapsToDevicePixels" Value="True" />
        <!--  自动化属性，优化可访问性  -->
        <Setter Property="AutomationProperties.AutomationId" Value="TextBox" />
        <Setter Property="AutomationProperties.Name" Value="{Binding Path=(helpers:TextBoxHelper.Placeholder), RelativeSource={RelativeSource Self}}" />
        <Setter Property="AutomationProperties.HelpText" Value="文本输入框" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TextBox">
                    <Border
                        x:Name="border"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        CornerRadius="{DynamicResource TextBoxCornerRadius}"
                        SnapsToDevicePixels="True"
                        UseLayoutRounding="True">
                        <!--  添加LOL风格的发光效果  -->
                        <Border
                            x:Name="glowBorder"
                            Margin="-2"
                            Background="Transparent"
                            BorderBrush="Transparent"
                            BorderThickness="2"
                            CornerRadius="{DynamicResource TextBoxCornerRadius}">
                            <Grid>
                                <!--  占位符文本  -->
                                <TextBlock
                                    x:Name="PlaceholderText"
                                    Padding="{TemplateBinding Padding}"
                                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                    VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                    FontFamily="{TemplateBinding FontFamily}"
                                    FontSize="{TemplateBinding FontSize}"
                                    Foreground="{DynamicResource TextSecondaryBrush}"
                                    IsHitTestVisible="False"
                                    Text="{Binding Path=(helpers:TextBoxHelper.Placeholder), RelativeSource={RelativeSource TemplatedParent}}"
                                    Visibility="Collapsed" />

                                <!--  文本输入区域  -->
                                <ScrollViewer
                                    x:Name="PART_ContentHost"
                                    Margin="{TemplateBinding Padding}"
                                    Focusable="False"
                                    HorizontalScrollBarVisibility="Hidden"
                                    VerticalScrollBarVisibility="Hidden" />
                            </Grid>
                        </Border>
                    </Border>


                    <ControlTemplate.Triggers>
                        <!--  显示占位符文本（当TextBox为空且未获得焦点时）  -->
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="Text" Value="" />
                                <Condition Property="IsFocused" Value="False" />
                            </MultiTrigger.Conditions>
                            <Setter TargetName="PlaceholderText" Property="Visibility" Value="Visible" />
                        </MultiTrigger>

                        <!--  Focused 且 MouseOver 状态 - 确保边框明显（优先级最高）  -->
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsFocused" Value="True" />
                                <Condition Property="IsMouseOver" Value="True" />
                            </MultiTrigger.Conditions>
                            <Setter TargetName="border" Property="BorderBrush" Value="{DynamicResource BorderGoldBrush}" />
                            <Setter TargetName="border" Property="BorderThickness" Value="2" />
                            <Setter TargetName="glowBorder" Property="BorderBrush" Value="{DynamicResource GoldGlowGradientIntense}" />
                            <Setter Property="Foreground" Value="{DynamicResource TextPrimaryBrush}" />
                        </MultiTrigger>

                        <!--  Focused 状态 - 边框高亮  -->
                        <Trigger Property="IsFocused" Value="True">
                            <Setter TargetName="border" Property="BorderBrush" Value="{DynamicResource BorderGoldBrush}" />
                            <Setter TargetName="border" Property="BorderThickness" Value="2" />
                            <Setter TargetName="glowBorder" Property="BorderBrush" Value="{DynamicResource GoldGlowGradient}" />
                            <Setter Property="Foreground" Value="{DynamicResource TextPrimaryBrush}" />
                        </Trigger>

                        <!--  MouseOver 状态（仅在未获得焦点时）  -->
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="border" Property="BorderBrush" Value="{DynamicResource BorderGoldBrush}" />
                            <Setter TargetName="border" Property="BorderThickness" Value="1.5" />
                            <Setter TargetName="glowBorder" Property="BorderBrush" Value="{DynamicResource GoldGlowGradient}" />
                            <Setter Property="Foreground" Value="{DynamicResource TextPrimaryBrush}" />
                        </Trigger>

                        <!--  Normal 状态 - 移除发光效果  -->
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsFocused" Value="False" />
                                <Condition Property="IsMouseOver" Value="False" />
                            </MultiTrigger.Conditions>
                            <Setter TargetName="glowBorder" Property="BorderBrush" Value="Transparent" />
                        </MultiTrigger>

                        <!--  Disabled 状态  -->
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="border" Property="Background" Value="{DynamicResource BackgroundCardBrush}" />
                            <Setter Property="Foreground" Value="{DynamicResource TextDisabledBrush}" />
                            <Setter TargetName="border" Property="Opacity" Value="0.6" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!--  默认 TextBox 样式  -->
    <Style BasedOn="{StaticResource LOLTextBoxStyle}" TargetType="{x:Type TextBox}" />

</ResourceDictionary>
